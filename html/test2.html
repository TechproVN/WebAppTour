<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="../plugins/paginationJs/pagination.css">
  <link rel="stylesheet" href="../MDB Free/css/bootstrap.min.css">
  <link rel="stylesheet" href="../MDB Free/css/mdb.min.css">
  
  <title>pagination</title>
</head>

<body>
  <div class="container">
      <div class="container-data"></div>
      <div id="demo"></div>
  </div>
  
  <script src="../MDB Free/js/jquery-3.3.1.min.js"></script>
  <script src="../MDB Free/js/popper.min.js"></script>
  <script src="../MDB Free/js/bootstrap.min.js"></script>
  <script src="../MDB Free/js/mdb.min.js"></script>
  
  <script src="../plugins/paginationJs/pagination.min.js"></script>
  <script src="../plugins/bootstrap-datetimepicker/js/bootstrap-datepicker.min.js"></script>
  <script src="../plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
  <script src="../custom/js/main.js"></script>
  <script src="../custom/js/service.js"></script>
  <script>
    // $('.paginationjs-pages').addClass('pagination');

    function renderPointsTable(data) {
    let $table = $('<table id="tblPoints" class="table table-hover table-striped "></table>');
    $table.html('');
    let $thead = $('<thead></thead>');
    let $tbody = $('<tbody></tbody>');
    // Display detail Incident: Zone, Code, Lat, Long, DateTime

    $thead.html(
      `
        <tr>
          <th class="trn">#</th>
          <th class="trn">Zone</th>
          <th class="trn">ID</th>
          <th class="trn">Name</th>
          <th class="trn">Note</th>
          <th class="trn">GPS</th>
          <th class="trn">QRCode</th>
          <th class="trn">RFID</th>
          <th class="trn">Datetime updated</th>
          <th class="trn"></th>
        </tr>
      `
    )
    if (data) {
      data.forEach((point, index) => {
        const {sZoneName, sPointCode, dDateTimeAdd, iPointID, sPointName, sPointNote, iGPS, iQRCode, iRFID} = point;
        $tbody.append(`
          <tr>
            <td>${index + 1}</td>
            <td>${sZoneName}</td>
            <td>${iPointID}</td>
            <td>${sPointName}</td>
            <td>${sPointNote}</td>
            <td>${iGPS}</td>
            <td>${iQRCode}</td>
            <td>${iRFID}</td>
            <td>${dDateTimeAdd}</td>
            <td>
              <div class="btn-group">
                <button type="button" class="btn btn-custom bg-main-color btn-custom-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Action
                </button>
                <div class="dropdown-menu" >
                  <button class="btn btn-custom btn-info btnPointUpdate btn-custom-small dropdown-item">Update</button>
                  <button class="btn btn-custom btn-danger btnPointDelete btn-custom-small dropdown-item" style="margin-left:-5px">Lock</button>
                </div>
              </div>
            </td>
          </tr>
        `)
        $tbody.find('.btn.btnPointUpdate').last().click(function(){
          showUpdatePointModal(point);
        })
        $tbody.find('.btn.btnPointDelete').last().click(function(){
          inActivePoint(point);
        })
      })
    }

    $table.append($thead).append($tbody);
    return $table;
}

    async function showPointsData() {
      let sentData = { iZoneID: 1 };
      let data = await Service.getPointsDataOnZone(sentData);
      $('#demo').pagination({
        dataSource: data,
        pageSize: 10,
        showGoInput: true,
        showGoButton: true,
        callback: function (data, pagination) {
          // template method of yourself
          let $table = renderPointsTable(data);
          $('.container-data').html($table);
        }
      })
    }

    // let arr = [];
    // for(let i = 1; i < 101; i++){
    //   arr.push(i);
    // }

    // $('#demo').pagination({
    //   dataSource: arr,
    //   pageSize: 10,
    //   showGoInput: true,
    //   showGoButton: true,
    //   callback: function (data, pagination) {
    //     // template method of yourself
    //     let ul = template(data);
    //     console.log(data);
    //     $('.container-data').html(ul);
    //   }
    // })
    
    // function template(data){
    //   let ul = $('<ul></ul>');
    //   data.forEach(num => {
    //     ul.append(`<li>${num}</li>`);
    //   })
    //   return ul;
    // }



    showPointsData();

  </script>
</body>

</html>